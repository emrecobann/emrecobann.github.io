<!doctype html>
<html lang="tr">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Radiology Impression Rater</title>
  <meta name="color-scheme" content="dark">
  <link rel="stylesheet" href="styles.css" />
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js" defer></script>
  <script src="app.js" defer></script>
</head>

<body>
  <div class="bg">
    <div class="blob b1"></div>
    <div class="blob b2"></div>
    <div class="grid"></div>
  </div>

  <header class="topbar">
    <div class="brand">
      <div class="mark" aria-hidden="true">
        <div class="mark-inner">R</div>
      </div>
      <div class="brand-text">
        <div class="title">Radiology Impression Rater</div>
        <div class="subtitle">Blinded outputs • Overall score (1–5) • Offline-first</div>
      </div>
    </div>

    <div class="topbar-right">
      <span id="userBadge" class="badge hidden"></span>
      <button id="btnExport" class="btn ghost hidden" type="button">Export</button>
      <button id="btnReset" class="btn danger hidden" type="button">Reset</button>
    </div>
  </header>

  <main class="wrap">
    <!-- LOGIN -->
    <section id="screenLogin" class="card">
      <div class="card-head">
        <h1>Başla / Devam Et</h1>
        <p class="muted">Her kullanıcı için örnekler <b>UserID</b> ile seed’lenir: aynı kullanıcı kaldığı yerden devam
          eder, farklı kullanıcı farklı vakalar görür.</p>
      </div>

      <div class="form-grid">
        <div class="field">
          <label class="label">Kullanıcı ID (zorunlu)</label>
          <input id="userId" class="input" placeholder="örn: dr_ayse_01" autocomplete="off" />
          <div class="hint">Aynı ID → aynı vaka seti + progress. Farklı ID → farklı vaka seti.</div>
        </div>

        <div class="field">
          <label class="label">Kurum / Ünvan (opsiyonel)</label>
          <input id="userMeta" class="input" placeholder="örn: Radyoloji Uzmanı, XXX Hastanesi" autocomplete="off" />
          <div class="hint">Export içinde yer alır.</div>
        </div>

        <div class="field">
          <label class="label">Her dataset için örnek sayısı</label>
          <select id="sampleSize" class="input"></select>
          <div class="hint">10–20 arası seçebilirsin.</div>
        </div>

        <!-- Remote kayıt endpoint kaldırıldı. Sonuçlar sadece tarayıcıda saklanır. -->
      </div>

      <details class="details">
        <summary>Skorlama</summary>
        <ul>
          <li>Her vaka için <b>tek Overall Score</b>: 1 (kötü) — 5 (mükemmel).</li>
          <li>Model isimleri gizli: A–G.</li>
          <li>GT Impression isteğe bağlı: “Show GT” ile aç.</li>
        </ul>
      </details>


      <div class="actions">
        <button id="btnStart" class="btn primary" type="button">Start / Resume</button>
      </div>
      <div class="muted" style="margin-top:10px;">Sonuçlar sadece bu tarayıcıda saklanır. Sunucuya gönderilmez.</div>

      <div id="loginStatus" class="status"></div>
    </section>

    <!-- APP -->
    <section id="screenApp" class="hidden">
      <div class="toolbar">
        <div class="tabs" id="datasetTabs"></div>

        <div class="toolbar-right">
          <div class="progress">
            <div class="progress-label"><span id="progressText">0/0</span></div>
            <div class="progress-bar">
              <div id="progressFill" class="progress-fill" style="width:0%"></div>
            </div>
          </div>
        </div>
      </div>

      <section id="caseCard" class="card"></section>

      <div class="actions sticky">
        <button id="btnPrev" class="btn ghost" type="button">← Prev</button>
        <button id="btnSaveNext" class="btn primary" type="button">Save & Next →</button>
      </div>

      <div id="appStatus" class="status"></div>
    </section>
  </main>

  <footer class="footer">
    <div class="muted">GitHub Pages • Offline-first (localStorage) • Optional remote sync</div>
  </footer>
</body>

</html>