<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Radiology Impression Rater</title>
  <meta name="description"
    content="Radiology impression evaluation tool - professional scoring system for blinded model outputs">
  <meta name="color-scheme" content="dark">
  <meta name="theme-color" content="#070914">
  <link rel="icon"
    href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸ©»</text></svg>">
  <link rel="preconnect" href="https://cdn.jsdelivr.net">
  <link rel="stylesheet" href="styles.css" />
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js" defer></script>
  <script src="app.js" defer></script>
</head>

<body>
  <div class="bg" aria-hidden="true">
    <div class="blob b1"></div>
    <div class="blob b2"></div>
    <div class="blob b3"></div>
    <div class="grid"></div>
  </div>

  <header class="topbar">
    <div class="brand">
      <div class="mark" aria-hidden="true">
        <div class="mark-inner">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"
            stroke-linecap="round" stroke-linejoin="round">
            <path d="M12 2L2 7l10 5 10-5-10-5z" />
            <path d="M2 17l10 5 10-5" />
            <path d="M2 12l10 5 10-5" />
          </svg>
        </div>
      </div>
      <div class="brand-text">
        <div class="title">Radiology Impression Rater</div>
        <div class="subtitle">Blinded Evaluation â€¢ Score 1-5 â€¢ Auto-save</div>
      </div>
    </div>

    <div class="topbar-right">
      <span id="userBadge" class="badge hidden">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
          stroke-linecap="round" stroke-linejoin="round">
          <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" />
          <circle cx="12" cy="7" r="4" />
        </svg>
        <span id="userBadgeText"></span>
      </span>
      <button id="btnExport" class="btn ghost hidden" type="button">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
          stroke-linecap="round" stroke-linejoin="round">
          <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
          <polyline points="7 10 12 15 17 10" />
          <line x1="12" y1="15" x2="12" y2="3" />
        </svg>
        Export
      </button>
      <button id="btnReset" class="btn danger hidden" type="button">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
          stroke-linecap="round" stroke-linejoin="round">
          <polyline points="1 4 1 10 7 10" />
          <path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10" />
        </svg>
        Reset
      </button>
    </div>
  </header>

  <main class="wrap">
    <!-- LOGIN -->
    <section id="screenLogin" class="card glass">
      <div class="card-head">
        <div class="card-icon">
          <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4" />
            <polyline points="10 17 15 12 10 7" />
            <line x1="15" y1="12" x2="3" y2="12" />
          </svg>
        </div>
        <div>
          <h1>Start / Resume</h1>
          <p class="muted">Samples are seeded by <strong>UserID</strong>. Same user continues from where they left off.
          </p>
        </div>
      </div>

      <div class="form-grid">
        <div class="field">
          <label class="label" for="userId">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
              stroke-linecap="round" stroke-linejoin="round">
              <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" />
              <circle cx="12" cy="7" r="4" />
            </svg>
            User ID (required)
          </label>
          <input id="userId" class="input" placeholder="e.g. dr_john_01" autocomplete="off" required />
          <div class="hint">Same ID = same case set + progress. Different ID = different case set.</div>
        </div>

        <div class="field">
          <label class="label" for="sampleSize">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
              stroke-linecap="round" stroke-linejoin="round">
              <line x1="8" y1="6" x2="21" y2="6" />
              <line x1="8" y1="12" x2="21" y2="12" />
              <line x1="8" y1="18" x2="21" y2="18" />
              <line x1="3" y1="6" x2="3.01" y2="6" />
              <line x1="3" y1="12" x2="3.01" y2="12" />
              <line x1="3" y1="18" x2="3.01" y2="18" />
            </svg>
            Sample size per dataset
          </label>
          <select id="sampleSize" class="input"></select>
          <div class="hint">You can select 10, 15, or 20 cases.</div>
        </div>
      </div>

      <details class="details">
        <summary>
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="10" />
            <line x1="12" y1="16" x2="12" y2="12" />
            <line x1="12" y1="8" x2="12.01" y2="8" />
          </svg>
          Scoring Guide
        </summary>
        <ul>
          <li><strong>Separate score</strong> for each model output: 1 (poor) - 5 (excellent)</li>
          <li>Model names are hidden: shown as A, B, C, D, E, F, G</li>
          <li>Ground Truth is optional: use "Show GT" to reveal</li>
          <li>Results are automatically saved in the browser</li>
        </ul>
      </details>

      <div class="actions">
        <button id="btnStart" class="btn primary" type="button">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"
            stroke-linecap="round" stroke-linejoin="round">
            <polygon points="5 3 19 12 5 21 5 3" />
          </svg>
          Start / Resume
        </button>
      </div>

      <div class="info-box">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
          stroke-linecap="round" stroke-linejoin="round">
          <rect x="3" y="11" width="18" height="11" rx="2" ry="2" />
          <path d="M7 11V7a5 5 0 0 1 10 0v4" />
        </svg>
        <span>Results are stored only in this browser. Not sent to any server.</span>
      </div>

      <div id="loginStatus" class="status"></div>
    </section>

    <!-- APP -->
    <section id="screenApp" class="hidden">
      <div class="toolbar">
        <div class="tabs" id="datasetTabs" role="tablist"></div>

        <div class="toolbar-right">
          <div class="progress" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
            <div class="progress-label">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                stroke-linecap="round" stroke-linejoin="round">
                <polyline points="9 11 12 14 22 4" />
                <path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11" />
              </svg>
              <span id="progressText">0/0</span>
            </div>
            <div class="progress-bar">
              <div id="progressFill" class="progress-fill" style="width:0%"></div>
            </div>
          </div>
        </div>
      </div>

      <section id="caseCard" class="card" aria-live="polite"></section>

      <div class="actions sticky">
        <button id="btnPrev" class="btn ghost" type="button">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <polyline points="15 18 9 12 15 6" />
          </svg>
          Previous
        </button>
        <button id="btnSaveNext" class="btn primary" type="button">
          Save & Next
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <polyline points="9 18 15 12 9 6" />
          </svg>
        </button>
      </div>

      <div id="appStatus" class="status" role="status" aria-live="polite"></div>
    </section>
  </main>

  <footer class="footer">
    <div class="footer-content">
      <span class="footer-brand">Radiology Impression Rater</span>
      <span class="footer-sep">|</span>
      <span>GitHub Pages</span>
      <span class="footer-sep">|</span>
      <span>Auto-save to localStorage</span>
    </div>
  </footer>
</body>

</html>